@startuml
skinparam SwimlaneTitleFontSize 14
skinparam SwimlaneBorderThickness 1
skinparam ActivityBackgroundColor #FEFECE
skinparam ActivityBorderColor #A80036
skinparam ActivityFontSize 12
skinparam ArrowColor #A80036
skinparam Shadowing false

actor "Calon Siswa" as User
boundary "Form Edit Pendaftaran" as View
control "PendaftaranController" as Ctrl
entity "Pendaftaran" as Model

User -> View : Memilih menu edit data
activate View

View -> Ctrl : checkEditAccess()
activate Ctrl
Ctrl -> Model : findByUser()
activate Model
Model --> Ctrl : dataPendaftaran
deactivate Model

alt Data Terkunci (Finalized/Verified)
    Ctrl --> View : Show Error "Data Locked"
else Data Editable
    Ctrl --> View : Show Edit Form
    
    User -> View : Update informasi data
    User -> View : Klik Simpan
    
    View -> Ctrl : update(request)
    Ctrl -> Ctrl : validate(request)
    
    alt Valid
        Ctrl -> Model : updateData(request)
        Ctrl --> View : Show Success Message
    else Invalid
        Ctrl --> View : Show Validation Error
        View --> User : Perbaiki data input
    end
end
deactivate Ctrl
deactivate View

@enduml
